<Prefab>
    <Window>
        <!-- Chat History Panel (right side) -->
        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" 
                SuggestedWidth="500" SuggestedHeight="500" 
                HorizontalAlignment="Right" VerticalAlignment="Top"
                MarginRight="50" MarginTop="50"
                IsVisible="true">
            <Children>
                <!-- Background Panel -->
                <Rectangle WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                           DoNotPassEventsToChildren="false"
                           Color="#88000000" >
                    <Children>
                        <!-- Chat History Header -->
                        <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" 
                                   SuggestedHeight="40" HorizontalAlignment="Center" 
                                   VerticalAlignment="Top" MarginTop="10"
                                   Text="Conversation History" Brush="Conversation.ConversationUITitle" />
                        
                        <!-- Chat History Scrollable Area -->
                        <ScrollablePanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                                        MarginTop="50" MarginBottom="70" MarginLeft="10" MarginRight="10"
                                        ClipRect="ClipRect" VerticalScrollbar="VerticalScrollbar">
                            <ItemTemplate>
                                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren"
                                          Text="@ConversationHistory" Brush="Conversation.NormalText" />
                            </ItemTemplate>
                            <ScrollBarWidget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent"
                                           SuggestedWidth="20" MarginRight="5" MarginTop="5" MarginBottom="5"
                                           HorizontalAlignment="Right" VerticalAlignment="Center" 
                                           Id="VerticalScrollbar" Handle="HandleWidget" 
                                           AlignmentType="Vertical" />
                        </ScrollablePanel>
                    </Children>
                </Rectangle>
            </Children>
        </Widget>
        
        <!-- Input Panel (bottom center) -->
        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" 
                SuggestedWidth="600" SuggestedHeight="80" 
                HorizontalAlignment="Center" VerticalAlignment="Bottom"
                MarginBottom="50">
            <Children>
                <Rectangle Color="#88000000">
                    <Children>
                        <EditableTextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                                          MarginLeft="20" MarginRight="120" MarginTop="20" MarginBottom="20"
                                          Text="@Message" 
                                          Hint="Type your message here..." HintColor="#88FFFFFF"
                                          Command.CommitEditAsCommand="ExecuteSendMessage" />
                        
                        <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                                    SuggestedWidth="80" SuggestedHeight="40" 
                                    HorizontalAlignment="Right" VerticalAlignment="Center"
                                    MarginRight="20"
                                    Command.Click="ExecuteSendMessage">
                            <Children>
                                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                                          Text="Send" 
                                          HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Children>
                        </ButtonWidget>
                    </Children>
                </Rectangle>
            </Children>
        </Widget>
        
        <!-- NPC Response Panel (above input) -->
        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" 
                SuggestedWidth="800" SuggestedHeight="100" 
                HorizontalAlignment="Center" VerticalAlignment="Bottom"
                MarginBottom="180"
                IsVisible="@IsProcessing">
            <Children>
                <!-- Background Panel -->
                <Rectangle WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                           DoNotPassEventsToChildren="false"
                           Color="#88000000" >
                    <Children>
                        <!-- NPC Response Text -->
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                                  MarginLeft="20" MarginRight="20" MarginTop="10" MarginBottom="10"
                                  Text="@NPCResponse" Brush="Conversation.NormalText" 
                                  HorizontalAlignment="Left" VerticalAlignment="Center" />
                    </Children>
                </Rectangle>
            </Children>
        </Widget>
    </Window>
</Prefab> 